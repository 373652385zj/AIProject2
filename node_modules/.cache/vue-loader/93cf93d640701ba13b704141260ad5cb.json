{"remainingRequest":"/Volumes/JAKY/温博老师给的任务/网页UI/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/JAKY/温博老师给的任务/网页UI/src/ParkingDetector/CheckpointEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/JAKY/温博老师给的任务/网页UI/src/ParkingDetector/CheckpointEditor.vue","mtime":1603697800000},{"path":"/Volumes/JAKY/温博老师给的任务/网页UI/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/JAKY/温博老师给的任务/网页UI/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/JAKY/温博老师给的任务/网页UI/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/JAKY/温博老师给的任务/网页UI/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KaW1wb3J0IHsgdjQgYXMgdXVpZCB9IGZyb20gInV1aWQiOw0KaW1wb3J0IFB1YlN1YiBmcm9tICJwdWJzdWItanMiOw0KaW1wb3J0IGNvbmYwU3JjMSBmcm9tICJAL2Fzc2V0cy9jYXIuanBnIjsNCg0KY2xhc3MgUGFya2luZ1NwYWNlIHsNCiAgY29uc3RydWN0b3IoeCwgeSwgaWQsIG5hbWUsIGN0eCkgew0KICAgIHRoaXMueCA9IHg7DQogICAgdGhpcy55ID0geTsNCiAgICB0aGlzLmlkID0gaWQ7DQogICAgdGhpcy5jdHggPSBjdHg7DQogICAgdGhpcy5uYW1lID0gbmFtZTsNCiAgICB0aGlzLnJhZGl1cyA9IDU7DQogICAgdGhpcy5hdmFpbGFibGUgPSB0cnVlOw0KICAgIHRoaXMuaGlnaGxpZ2h0ID0gZmFsc2U7DQogICAgdGhpcy5hdmFpbGFibGVDb3VudGVyID0gMDsNCiAgICB0aGlzLnByb3BvcnRpb25YID0gNzIwLzE5ODA7DQogICAgdGhpcy5wcm9wb3J0aW9uWSA9IDQ4MC8xMDgwOw0KICB9DQoNCiAgaXNIb3Zlcihtb3VzZVgsIG1vdXNlWSkgew0KICAgIC8vIOawtOW5s+i3neemu+aIluWeguebtOi3neemu+Wkp+S6juWNiuW+hO+8jOWImeS4gOWumuS4jeWPr+iDveaCrOWBnA0KICAgIGlmICgNCiAgICAgIE1hdGguYWJzKHRoaXMueCAtIG1vdXNlWCkgPiB0aGlzLnJhZGl1cyB8fA0KICAgICAgTWF0aC5hYnModGhpcy55IC0gbW91c2VZKSA+IHRoaXMucmFkaXVzDQogICAgKSB7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KICAgIGxldCBkaXN0YW5jZSA9IE1hdGguc3FydCgNCiAgICAgICh0aGlzLnggLSBtb3VzZVgpICogKHRoaXMueCAtIG1vdXNlWCkgKw0KICAgICAgICAodGhpcy55IC0gbW91c2VZKSAqICh0aGlzLnkgLSBtb3VzZVkpDQogICAgKTsNCiAgICBpZiAoZGlzdGFuY2UgPiB0aGlzLnJhZGl1cykgew0KICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCiAgICByZXR1cm4gdHJ1ZTsNCiAgfQ0KDQogIHJlZnJlc2hBdmFpbGFiaWxpdHkoZGV0ZWN0aW9ucykgew0KICAgIGxldCBhdmFpbGFibGUgPSB0cnVlOw0KICAgIGxldCBzdGF0ZUNoYW5nZWQgPSBmYWxzZTsNCiAgICBsZXQgaW5kZXggPSAwDQogICAgY29uc29sZS5sb2coZGV0ZWN0aW9ucykNCiAgICAvLyBmb3IgKGxldCBlIGluIGRldGVjdGlvbnMpIHsNCiAgICAvLyAgIGlmKCFkZXRlY3Rpb25zW2VdLmF2YWlsYWJsZSkgew0KICAgIC8vICAgICBhdmFpbGFibGUgPSBkZXRlY3Rpb25zW2VdLmF2YWlsYWJsZQ0KICAgIC8vICAgICBjb25zb2xlLmxvZygiTmFtZToiLGRldGVjdGlvbnNbZV0uYXZhaWxhYmxlKQ0KICAgIC8vICAgICBicmVhazsNCiAgICAvLyAgIH0NCiAgICAvLyB9DQogICAgZm9yIChsZXQgZSBvZiBkZXRlY3Rpb25zKSB7DQogICAgICBsZXQgbGVmdCA9IGVbMF0gKiB0aGlzLnByb3BvcnRpb25YOw0KICAgICAgbGV0IHRvcCA9IGVbMV0gKiB0aGlzLnByb3BvcnRpb25ZOw0KICAgICAgbGV0IHJpZ2h0ID0gbGVmdCArIGVbMl0gKiB0aGlzLnByb3BvcnRpb25YOw0KICAgICAgbGV0IGJvdHRvbSA9IHRvcCArIGVbM10gKiB0aGlzLnByb3BvcnRpb25ZOw0KICAgICAgaWYgKHRoaXMueSA+IHRvcCAmJiB0aGlzLnkgPCBib3R0b20gJiYgdGhpcy54ID4gbGVmdCAmJiB0aGlzLnggPCByaWdodCkgew0KICAgICAgICBhdmFpbGFibGUgPSBmYWxzZTsNCiAgICAgICAgYnJlYWs7DQogICAgICB9DQogICAgfQ0KICAgIC8v5qih5Z6L5a655piT5oqK5pyJ6L2m6K+G5Yir5oiQ5rKh6L2m77yM5L2G5LiN5a655piT5oqK5rKh6L2m6K+G5Yir5oiQ5pyJ6L2m77yM5omA5Lul6L+e57ut6K+G5Yir5LiJ5qyh5rKh6L2m5omN5pS55Y+Y54q25oCBDQogICAgLy8gY29uc29sZS5sb2coImF2YWlsYWJsZToiLGF2YWlsYWJsZSx0aGlzLmF2YWlsYWJsZSkNCiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmF2YWlsYWJsZUNvdW50ZXIpDQogICAgaWYgKGF2YWlsYWJsZSkgew0KICAgICAgY29uc29sZS5sb2coMSkNCiAgICAgIHRoaXMuYXZhaWxhYmxlQ291bnRlcisrOw0KICAgICAgaWYgKHRoaXMuYXZhaWxhYmxlQ291bnRlciA9PSAzKSB7DQogICAgICBjb25zb2xlLmxvZygyKQ0KICAgICAgICB0aGlzLmF2YWlsYWJsZSA9IHRydWU7DQogICAgICAgIHRoaXMuYXZhaWxhYmxlQ291bnRlciA9IDA7DQogICAgICAgIHN0YXRlQ2hhbmdlZCA9IHRydWU7DQogICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgIGNvbnNvbGUubG9nKDMpDQogICAgICBpZiAodGhpcy5hdmFpbGFibGUpIHN0YXRlQ2hhbmdlZCA9IHRydWU7DQogICAgICBjb25zb2xlLmxvZyg0KQ0KICAgICAgdGhpcy5hdmFpbGFibGUgPSBmYWxzZTsNCiAgICAgIHRoaXMuYXZhaWxhYmxlQ291bnRlciA9IDA7DQogICAgfQ0KICAgIHJldHVybiBzdGF0ZUNoYW5nZWQ7DQogIH0NCg0KICByZWZyZXNoRXh0ZXJpb3IobW91c2VYLCBtb3VzZVkpIHsNCiAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTsNCiAgICBsZXQgaXNIb3ZlciA9IHRoaXMuaXNIb3Zlcihtb3VzZVgsIG1vdXNlWSk7DQogICAgbGV0IHJlc2l6ZUZhY3RvciA9IHRoaXMuaGlnaGxpZ2h0IHx8IGlzSG92ZXIgPyAxLjUgOiAxOw0KICAgIHRoaXMuY3R4LmFyYygNCiAgICAgIHRoaXMueCwNCiAgICAgIHRoaXMueSwNCiAgICAgIHRoaXMucmFkaXVzICogcmVzaXplRmFjdG9yLA0KICAgICAgMCwNCiAgICAgIDIgKiBNYXRoLlBJLA0KICAgICAgZmFsc2UNCiAgICApOw0KICAgIC8vIGNvbnNvbGUubG9nKCJoaWdobGlnaHQ6Iix0aGlzLmhpZ2hsaWdodCwiLGF2YWlsYWJsZToiLHRoaXMuYXZhaWxhYmxlKQ0KICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9ICgoKSA9PiB7DQogICAgICBpZiAodGhpcy5oaWdobGlnaHQpIHJldHVybiAiI2ZmYTUwMCI7DQogICAgICBpZiAodGhpcy5hdmFpbGFibGUpIHJldHVybiAiIzAwZmYwMCI7DQogICAgICByZXR1cm4gIiNmZjAwMDAiOw0KICAgIH0pKCk7DQogICAgdGhpcy5jdHguZmlsbCgpOw0KICAgIGlmIChpc0hvdmVyKSB7DQogICAgICB0aGlzLmN0eC5saW5lV2lkdGggPSAyOw0KICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmF2YWlsYWJsZSA/ICIjMDAzMzAwIiA6ICIjMzMwMDAwIjsNCiAgICAgIHRoaXMuY3R4LnN0cm9rZSgpOw0KICAgIH0NCiAgfQ0KDQp9DQoNCmNsYXNzIFBhcmtpbmdTcGFjZVN0b3JhZ2Ugew0KICBjb25zdHJ1Y3RvcihjdHgsIGhvc3QsIHVybCkgew0KICAgIHRoaXMuY3R4ID0gY3R4Ow0KICAgIHRoaXMuaG9zdCA9IGhvc3Q7DQogICAgdGhpcy51cmwgPSB1cmw7DQogICAgdGhpcy5zdG9yYWdlID0gbmV3IE1hcCgpOw0KICB9DQoNCiAgbG9hZChkYXRhKSB7DQogICAgLy8gYWxlcnQodGhpcy5ob3N0KTsNCiAgICBjb25zb2xlLmxvZygiPT09PSIpOw0KICAgIGNvbnNvbGUubG9nKGRhdGEpOw0KICAgIGZvciAobGV0IGlkIGluIGRhdGEpIHsNCiAgICAgIHRoaXMuY3JlYXRlKGRhdGFbaWRdLngsIGRhdGFbaWRdLnksIGZhbHNlLCBpZCwgZGF0YVtpZF0ubmFtZSk7DQogICAgfQ0KICB9DQoNCiAgY3JlYXRlKHgsIHksIGV4cG9ydE5lZWRlZCwgaWQgPSBudWxsLCBuYW1lID0gbnVsbCkgew0KICAgIGxldCBuZXdJRCA9IGlkID09IG51bGwgPyB1dWlkKCkgOiBpZDsNCiAgICBsZXQgbmV3TmFtZSA9IG5hbWUgPT0gbnVsbCA/IG5ld0lELnN1YnN0cmluZygwLCA1KSA6IG5hbWU7DQogICAgdGhpcy5zdG9yYWdlLnNldCgNCiAgICAgIG5ld0lELA0KICAgICAgbmV3IFBhcmtpbmdTcGFjZShNYXRoLnJvdW5kKHgpLCBNYXRoLnJvdW5kKHkpLCBuZXdJRCwgbmV3TmFtZSwgdGhpcy5jdHgpDQogICAgKTsNCg0KICAgIFB1YlN1Yi5wdWJsaXNoKCJjcmVhdGUiLCB7DQogICAgICB4OiBNYXRoLnJvdW5kKHgpLA0KICAgICAgeTogTWF0aC5yb3VuZCh5KSwNCiAgICAgIGlkOiBuZXdJRCwNCiAgICAgIG5hbWU6IG5ld05hbWUsDQogICAgfSk7DQogICAgaWYgKGV4cG9ydE5lZWRlZCkgdGhpcy5leHBvcnQoKTsNCiAgICByZXR1cm4gbmV3SUQ7DQogIH0NCg0KICByZW1vdmUoZWxlbWVudCkgew0KICAgIHRoaXMuc3RvcmFnZS5kZWxldGUoZWxlbWVudC5pZCk7DQogICAgUHViU3ViLnB1Ymxpc2goInJlbW92ZSIsIGVsZW1lbnQuaWQpOw0KICAgIHRoaXMuZXhwb3J0KCk7DQogIH0NCg0KICBmb3JFYWNoKGNhbGxiYWNrKSB7DQogICAgdGhpcy5zdG9yYWdlLmZvckVhY2goY2FsbGJhY2spOw0KICB9DQoNCiAgcmVmcmVzaEV4dGVyaW9yKG1vdXNlWCwgbW91c2VZKSB7DQogICAgdGhpcy5mb3JFYWNoKChwcykgPT4gew0KICAgICAgcHMucmVmcmVzaEV4dGVyaW9yKG1vdXNlWCwgbW91c2VZKTsNCiAgICB9KTsNCiAgfQ0KDQogIHJlZnJlc2hBdmFpbGFiaWxpdHkoZGV0ZWN0aW9ucykgew0KICAgIHRoaXMuZm9yRWFjaCgocHMpID0+IHsNCiAgICAgIGNvbnNvbGUubG9nKHBzKQ0KICAgICAgbGV0IHN0YXRlQ2hhbmdlZCA9IHBzLnJlZnJlc2hBdmFpbGFiaWxpdHkoZGV0ZWN0aW9ucyk7DQogICAgICBjb25zb2xlLmxvZyhzdGF0ZUNoYW5nZWQpDQogICAgICBpZiAoc3RhdGVDaGFuZ2VkKSB7DQogICAgICAgIFB1YlN1Yi5wdWJsaXNoKCJjaGFuZ2UiLCB7IGlkOiBwcy5pZCwgYXZhaWxhYmxlOiBwcy5hdmFpbGFibGUgfSk7DQogICAgICB9DQogICAgfSk7DQogIH0NCg0KICByZW5hbWUoaWQsIG5hbWUpIHsNCiAgICBsZXQgZWxlbWVudCA9IHRoaXMuc3RvcmFnZS5nZXQoaWQpOw0KICAgIGVsZW1lbnQubmFtZSA9IG5hbWU7DQogICAgdGhpcy5zdG9yYWdlLnNldChpZCwgZWxlbWVudCk7DQogICAgdGhpcy5leHBvcnQoKTsNCiAgfQ0KDQogIGhpZ2hsaWdodChpZCkgew0KICAgIHRoaXMuZm9yRWFjaCgocHMpID0+IHsNCiAgICAgIGlmIChwcy5pZCA9PSBpZCkgew0KICAgICAgICBwcy5oaWdobGlnaHQgPSB0cnVlOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcHMuaGlnaGxpZ2h0ID0gZmFsc2U7DQogICAgICB9DQogICAgfSk7DQogIH0NCg0KICBpc0R1cGxpY2F0ZShuYW1lKSB7DQogICAgbGV0IGR1cGxpY2F0ZSA9IGZhbHNlOw0KICAgIHRoaXMuZm9yRWFjaCgocHMpID0+IHsNCiAgICAgIGlmIChwcy5uYW1lID09IG5hbWUpIGR1cGxpY2F0ZSA9IHRydWU7DQogICAgfSk7DQogICAgcmV0dXJuIGR1cGxpY2F0ZTsNCiAgfQ0KDQogIGV4cG9ydCgpIHsNCiAgICBsZXQgdGVtcFN0b3JhZ2UgPSB7fTsNCiAgICBhbGVydCh0aGlzLnVybCk7DQogICAgdGhpcy5mb3JFYWNoKChwcykgPT4gew0KICAgICAgdGVtcFN0b3JhZ2VbcHMuaWRdID0geyB4OiBwcy54LCB5OiBwcy55LCBuYW1lOiBwcy5uYW1lIH07DQogICAgfSk7DQogICAgYXhpb3MNCiAgICAgIC8vIC5wb3N0KGBodHRwOi8vJHt0aGlzLmhvc3R9L2RldGVjdC9jaGVja3BvaW50c2AsIHRlbXBTdG9yYWdlKQ0KICAgICAgLnBvc3QoYGh0dHA6Ly8ke3RoaXMuaG9zdH0vY2FyL3VwZGF0ZVBhcmtpbmdQb2ludGAsIHsNCiAgICAgICAgdXJsOiB0aGlzLnVybCwNCiAgICAgICAgcGFya2luZ1BvaW50OiB0ZW1wU3RvcmFnZSwNCiAgICAgIH0pDQogICAgICAudGhlbigocmVzcCkgPT4gew0KICAgICAgICBpZiAocmVzcC5zdGF0dXMgIT09IDIwMCkgew0KICAgICAgICAgIGNvbnNvbGUuZXJyb3IoImNhbm5vdCBwb3N0IHBvaW50IGRhdGEiKTsNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKGVycik7DQogICAgICB9KTsNCiAgfQ0KfQ0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJja2Vja3BvaW50LWVkaXRvciIsDQogIHByb3BzOiB7DQogICAgLy8gaG9zdDogU3RyaW5nLA0KICB9LA0KICBkYXRhOiBmdW5jdGlvbiAoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGhvc3Q6ICJtcXR0LmlvdC5ubGlua3MuY246OTg5OCIsDQogICAgICB1cmw6ICJydHNwOi8vMTkyLjE2OC4xMzcuMTAyOjg1NTciLA0KICAgICAgLy/or4bliKvnu5PmnpznlLvluIPlj4rlhbbkuIrkuIvmlocNCiAgICAgIGRldGVjdENhbnZhczogbnVsbCwNCiAgICAgIGRldGVjdEN0eDogbnVsbCwNCiAgICAgIC8v6L2m5L2N77yI5qOA5p+l54K577yJ5YiX6KGoDQogICAgICBwYXJraW5nU3BhY2VTdG9yYWdlOiBudWxsLA0KICAgICAgLy9kZXRlY3Rpb24gPSBbW3gsIHksIHcsIGhdLCBbeCwgeSwgdywgaF0sIC4uLl0NCiAgICAgIGRldGVjdGlvbnM6IG51bGwsDQogICAgICAvL+m8oOagh+S9jee9rg0KICAgICAgbW91c2VYOiAwLA0KICAgICAgbW91c2VZOiAwLA0KICAgICAgLy/mmK/lkKblnKjnvJbovpHnirbmgIENCiAgICAgIGVkaXRhYmxlOiBmYWxzZSwNCiAgICAgIC8v57yW6L6R54q25oCB55u45YWzDQogICAgICBlZGl0TW9kZTogImltbWVkaWF0ZSIsDQogICAgICBpbW1lZGlhdGU6IHsNCiAgICAgICAgSUQ6ICIiLA0KICAgICAgICBuYW1lOiAiIiwNCiAgICAgICAgc3RhdGU6IG51bGwsDQogICAgICB9LA0KICAgICAgY29udGludWFsczogew0KICAgICAgICBuZXh0OiAiMDAxIiwNCiAgICAgICAgc3RhdGU6IG51bGwsDQogICAgICB9LA0KICAgICAgLy/mmK/lkKbov5jlnKjliJ3lp4vljJYs4oCc5Yqg6L295Lit4oCdDQogICAgICBwcmVwYXJpbmc6IHRydWUsDQogICAgICBjb25mMFNyYzogY29uZjBTcmMxLA0KICAgICAgcHJvcG9ydGlvblg6IDcyMC8xOTgwLA0KICAgICAgcHJvcG9ydGlvblk6IDQ4MC8xMDgwLA0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBzaG93KCkgew0KICAgICAgYWxlcnQodGhpcy5ob3N0KTsNCiAgICB9LA0KICAgIHJlbmFtZTogZnVuY3Rpb24gKCkgew0KICAgICAgaWYgKHRoaXMucGFya2luZ1NwYWNlU3RvcmFnZS5pc0R1cGxpY2F0ZSh0aGlzLmltbWVkaWF0ZS5uYW1lKSkgew0KICAgICAgICB0aGlzLmltbWVkaWF0ZS5zdGF0ZSA9IGZhbHNlOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICB0aGlzLmltbWVkaWF0ZS5zdGF0ZSA9IG51bGw7DQogICAgICBQdWJTdWIucHVibGlzaCgicmVuYW1lIiwgew0KICAgICAgICBpZDogdGhpcy5pbW1lZGlhdGUuSUQsDQogICAgICAgIG5hbWU6IHRoaXMuaW1tZWRpYXRlLm5hbWUsDQogICAgICB9KTsNCiAgICB9LA0KICAgIGNvbnRpbnVhbHNOZXh0OiBmdW5jdGlvbiAoKSB7DQogICAgICBsZXQgZGlnaXQgPSB0aGlzLmNvbnRpbnVhbHMubmV4dC5sZW5ndGg7DQogICAgICBsZXQgbmV3TmV4dCA9IGAke051bWJlci5wYXJzZUludCh0aGlzLmNvbnRpbnVhbHMubmV4dCkgKyAxfWA7DQogICAgICB3aGlsZSAobmV3TmV4dC5sZW5ndGggPCBkaWdpdCkgbmV3TmV4dCA9IGAwJHtuZXdOZXh0fWA7DQogICAgICB0aGlzLmNvbnRpbnVhbHMubmV4dCA9IG5ld05leHQ7DQogICAgfSwNCiAgfSwNCiAgbW91bnRlZDogYXN5bmMgZnVuY3Rpb24gKCkgew0KICAgIGNvbnN0IF90aGlzID0gdGhpczsNCiAgICAvL+WIm+W7uuWvueivhuWIq+e7k+aenOeUu+W4g+WPiuWFtuS4iuS4i+aWh+eahOW8leeUqA0KICAgIHRoaXMuZGV0ZWN0Q2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRldGVjdENhbnZhcyIpOw0KICAgIHRoaXMuZGV0ZWN0Q2FudmFzLndpZHRoID0gNzIwOw0KICAgIHRoaXMuZGV0ZWN0Q2FudmFzLmhlaWdodCA9IDQ4MDsNCiAgICB0aGlzLmRldGVjdEN0eCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkZXRlY3RDYW52YXMiKS5nZXRDb250ZXh0KCIyZCIpOw0KICAgIC8v5Yid5aeL5YyW5qOA5p+l54K55YKo5a2YDQogICAgdGhpcy5wYXJraW5nU3BhY2VTdG9yYWdlID0gbmV3IFBhcmtpbmdTcGFjZVN0b3JhZ2UoDQogICAgICB0aGlzLmRldGVjdEN0eCwNCiAgICAgIHRoaXMuaG9zdCwNCiAgICAgIHRoaXMudXJsDQogICAgKTsNCg0KICAgIC8v6I635Y+W5pyN5Yqh5Zmo56uv57yT5a2Y55qE5qOA5p+l54K55L+h5oGvDQogICAgYXdhaXQgYXhpb3MNCiAgICAgIC8vIC5nZXQoYGh0dHA6Ly8ke3RoaXMuaG9zdH0vY2FtZXJhL2RldGVjdC9jaGVja3BvaW50c2ApDQogICAgICAucG9zdChgaHR0cDovLyR7dGhpcy5ob3N0fS9jYXIvZ2V0UGFya2luZ1BvaW50YCwgew0KICAgICAgICB1cmw6IHRoaXMudXJsLA0KICAgICAgfSkNCiAgICAgIC50aGVuKChyZXNwKSA9PiB7DQogICAgICAgIGlmIChyZXNwLnN0YXR1cyA9PSAyMDApIHsNCiAgICAgICAgICB2YXIgZGF0YSA9IHJlc3AuZGF0YS5kYXRhOw0KICAgICAgICAgIHRoaXMucGFya2luZ1NwYWNlU3RvcmFnZS5sb2FkKGRhdGEpOw0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgY29uc29sZS5lcnJvcihgJHtlcnJ9YCk7DQogICAgICB9KTsNCg0KICAgIC8v6I635Y+W6K+G5Yir5qGGDQogICAgYXdhaXQgYXhpb3MNCiAgICAgIC8vIC5nZXQoYGh0dHA6Ly8ke3RoaXMuaG9zdH0vY2FtZXJhL2RldGVjdC9ib3hgKQ0KICAgICAgLnBvc3QoYGh0dHA6Ly8ke3RoaXMuaG9zdH0vY2FyL2dldENhckJvdW5kaW5nQm94YCwgew0KICAgICAgICB1cmw6IHRoaXMudXJsLA0KICAgICAgfSkNCiAgICAgIC50aGVuKChyZXNwKSA9PiB7DQogICAgICAgIGlmIChyZXNwLnN0YXR1cyA9PSAyMDApIHsNCiAgICAgICAgICB0aGlzLmRldGVjdGlvbnMgPSByZXNwLmRhdGEuZGF0YTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmRldGVjdGlvbnMgPSBbXTsNCiAgICAgICAgICBjb25zb2xlLmVycm9yKCJjYW5ub3QgZmV0Y2ggZGV0ZWN0aW9ucyIpOw0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgY29uc29sZS5lcnJvcihgJHtlcnJ9YCk7DQogICAgICB9KTsNCg0KICAgIC8v5b2T5Zu+5YOP5rqQ5a695bqm5LiN5pivMO+8iOWNs+W3suWKoOi9veWlve+8ieaXtuWPlua2iCLlh4blpIfkuK0i6YGu572pDQogICAgbGV0IHByZXBhcmVDaGVja2VyID0gc2V0SW50ZXJ2YWwoKCkgPT4gew0KICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkZXRlY3RTb3VyY2UiKS53aWR0aCAhPSAwKSB7DQogICAgICAgIGNsZWFySW50ZXJ2YWwocHJlcGFyZUNoZWNrZXIpOw0KICAgICAgICB0aGlzLnByZXBhcmluZyA9IGZhbHNlOw0KICAgICAgfQ0KICAgIH0sIDUwKTsNCg0KICAgIC8v5q+PNTDmr6vnp5LliLfmlrDkuIDmrKHnlLvluIMNCiAgICBsZXQgbGFzdFJlZnJlc2hUaW1lc3RhbXAgPSAwOw0KICAgIGxldCByZWZyZXNoQ2FudmFzID0gKHRpbWUpID0+IHsNCiAgICAgIGlmICh0aW1lIC0gbGFzdFJlZnJlc2hUaW1lc3RhbXAgPiA1MCkgew0KICAgICAgICBsYXN0UmVmcmVzaFRpbWVzdGFtcCA9IHRpbWU7DQogICAgICAgIGxldCBzb3VyY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGV0ZWN0U291cmNlIik7DQogICAgICAgIC8vIGNvbnNvbGUubG9nKHNvdXJjZSkNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICB0aGlzLmRldGVjdEN0eC5kcmF3SW1hZ2UoDQogICAgICAgICAgICBzb3VyY2UsDQogICAgICAgICAgICAwLA0KICAgICAgICAgICAgMCwNCiAgICAgICAgICAgIHRoaXMuZGV0ZWN0Q2FudmFzLndpZHRoLA0KICAgICAgICAgICAgdGhpcy5kZXRlY3RDYW52YXMuaGVpZ2h0DQogICAgICAgICAgKTsNCiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAvKmlnbm9yZSB3YXJuaW5nKi8NCiAgICAgICAgfQ0KICAgICAgICB0aGlzLnBhcmtpbmdTcGFjZVN0b3JhZ2UucmVmcmVzaEV4dGVyaW9yKHRoaXMubW91c2VYLCB0aGlzLm1vdXNlWSk7DQogICAgICB9DQogICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVmcmVzaENhbnZhcyk7DQogICAgfTsNCiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVmcmVzaENhbnZhcyk7DQoNCiAgICAvL+avjzTnp5Lojrflj5bkuIDmrKHor4bliKvmoYblubbliLfmlrDljaDnlKjmg4XlhrUNCiAgICBsZXQgbGFzdEZldGNoVGltZXN0YW1wID0gMDsNCiAgICBsZXQgZmV0Y2hEZXRlY3Rpb24gPSBhc3luYyAodGltZSkgPT4gew0KICAgICAgaWYgKHRpbWUgLSBsYXN0RmV0Y2hUaW1lc3RhbXAgPiA0MDAwKSB7DQogICAgICAgIGxhc3RGZXRjaFRpbWVzdGFtcCA9IHRpbWU7DQogICAgICAgIGF3YWl0IGF4aW9zDQogICAgICAgICAgLy8gLmdldChgaHR0cDovLyR7dGhpcy5ob3N0fS9jYW1lcmEvZGV0ZWN0L2JveGApDQogICAgICAgICAgLnBvc3QoYGh0dHA6Ly8ke3RoaXMuaG9zdH0vY2FyL2dldENhckJvdW5kaW5nQm94YCwgew0KICAgICAgICAgICAgdXJsOiB0aGlzLnVybCwNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC50aGVuKChyZXNwKSA9PiB7DQogICAgICAgICAgICBpZiAocmVzcC5zdGF0dXMgPT0gMjAwKSB7DQogICAgICAgICAgICAgIHRoaXMuZGV0ZWN0aW9ucyA9IHJlc3AuZGF0YS5kYXRhOw0KDQogICAgICAgICAgICAgIC8vIGZvcihsZXQgZSBpbiB0aGlzLmRldGVjdGlvbnMpIHsNCiAgICAgICAgICAgICAgLy8gICBpZihlID09ICIyYmNjNTNkNC1hYjAxLTQwYTItYThlMC1kYTIwNmNkMmU0OWIiIHx8DQogICAgICAgICAgICAgIC8vICAgZSA9PSAiOWMyNDM2ZmItNWRiMS00YjExLTliOTAtN2U5OTc0YTZkZmRjIil7DQogICAgICAgICAgICAgIC8vICAgICB0aGlzLmRldGVjdGlvbnNbZV0uYXZhaWxhYmxlID0gZmFsc2UNCiAgICAgICAgICAgICAgLy8gICB9DQogICAgICAgICAgICAgIC8vIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRoaXMuZGV0ZWN0aW9ucyA9IFtdOw0KICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJjYW5ub3QgZmV0Y2ggZGV0ZWN0aW9ucyIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgdGhpcy5wYXJraW5nU3BhY2VTdG9yYWdlLnJlZnJlc2hBdmFpbGFiaWxpdHkodGhpcy5kZXRlY3Rpb25zKTsNCiAgICAgIH0NCiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmZXRjaERldGVjdGlvbik7DQogICAgfTsNCiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZmV0Y2hEZXRlY3Rpb24pOw0KDQogICAgLy/lj5bmtojnlLvluIPngrnlh7vlj7PplK7ml7blvLnlh7rlj7PplK7oj5zljZUNCiAgICB0aGlzLmRldGVjdENhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJjb250ZXh0bWVudSIsIChldmVudCkgPT4gew0KICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICB9KTsNCg0KICAgIC8v6byg5qCH5oqs6LW35pe25bCd6K+V5Yib5bu65paw5qOA5p+l54K5DQogICAgdGhpcy5kZXRlY3RDYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsIChldmVudCkgPT4gew0KICAgICAgaWYgKCF0aGlzLmVkaXRhYmxlKSByZXR1cm47DQogICAgICBpZiAodGhpcy5tb3VzZVggPCA3MjAgJiYgdGhpcy5tb3VzZVkgPCA0ODApIHsNCiAgICAgICAgbGV0IG5ld1BhcmtpbmdTcGFjZSA9IHRydWU7DQogICAgICAgIGlmIChldmVudC5idXR0b24gPT0gMCkgew0KICAgICAgICAgIC8v5bem6ZSu5Y2V5Ye75pe2DQogICAgICAgICAgLy/lpoLmnpzmsqHmnInmgqzlgZzlnKjnjrDmnInmo4Dmn6XngrnkuIrvvIzliJnliJvlu7rkuIDkuKrmlrDnmoTmo4Dmn6XngrkNCiAgICAgICAgICB0aGlzLnBhcmtpbmdTcGFjZVN0b3JhZ2UuZm9yRWFjaCgocHMpID0+IHsNCiAgICAgICAgICAgIGlmIChwcy5pc0hvdmVyKHRoaXMubW91c2VYLCB0aGlzLm1vdXNlWSkpIHsNCiAgICAgICAgICAgICAgbmV3UGFya2luZ1NwYWNlID0gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICAgICAgaWYgKG5ld1BhcmtpbmdTcGFjZSkgew0KICAgICAgICAgICAgaWYgKHRoaXMuZWRpdE1vZGUgPT0gImltbWVkaWF0ZSIpIHsNCiAgICAgICAgICAgICAgdGhpcy5pbW1lZGlhdGUuSUQgPSB0aGlzLnBhcmtpbmdTcGFjZVN0b3JhZ2UuY3JlYXRlKA0KICAgICAgICAgICAgICAgIHRoaXMubW91c2VYLA0KICAgICAgICAgICAgICAgIHRoaXMubW91c2VZLA0KICAgICAgICAgICAgICAgIHRydWUNCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgdGhpcy4kcmVmc1siaW1tZWRpYXRlLWlucHV0Il0uZm9jdXMoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0aGlzLmVkaXRNb2RlID09ICJjb250aW51YWxzIikgew0KICAgICAgICAgICAgICB0aGlzLnBhcmtpbmdTcGFjZVN0b3JhZ2UuY3JlYXRlKA0KICAgICAgICAgICAgICAgIHRoaXMubW91c2VYLA0KICAgICAgICAgICAgICAgIHRoaXMubW91c2VZLA0KICAgICAgICAgICAgICAgIHRydWUsDQogICAgICAgICAgICAgICAgbnVsbCwNCiAgICAgICAgICAgICAgICB0aGlzLmNvbnRpbnVhbHMubmV4dA0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICB0aGlzLmNvbnRpbnVhbHNOZXh0KCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmJ1dHRvbiA9PSAyKSB7DQogICAgICAgICAgLy/lj7PplK7ljZXlh7vml7YNCiAgICAgICAgICAvL+WmguaenOaCrOWBnOWcqOeOsOacieajgOafpeeCueS4iu+8jOWImeWIoOmZpOi/meS4quajgOafpeeCuQ0KICAgICAgICAgIHRoaXMucGFya2luZ1NwYWNlU3RvcmFnZS5mb3JFYWNoKChwcykgPT4gew0KICAgICAgICAgICAgaWYgKHBzLmlzSG92ZXIodGhpcy5tb3VzZVgsIHRoaXMubW91c2VZKSkgew0KICAgICAgICAgICAgICB0aGlzLnBhcmtpbmdTcGFjZVN0b3JhZ2UucmVtb3ZlKHBzKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9KTsNCiAgICAgICAgfSBlbHNlIGlmIChldmVudC5idXR0b24gPT0gMSkgew0KICAgICAgICAgIGNvbnNvbGUubG9nKGAoJHt0aGlzLm1vdXNlWH0sICR7dGhpcy5tb3VzZVl9KWApOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSk7DQoNCiAgICAvL+m8oOagh+enu+WKqOaXtuWIt+aWsOWCqOWtmOeahOm8oOagh+S9jee9rg0KICAgIHRoaXMuZGV0ZWN0Q2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsIChldmVudCkgPT4gew0KICAgICAgaWYgKCF0aGlzLmVkaXRhYmxlKSByZXR1cm47DQogICAgICBsZXQgcmVjdCA9IHRoaXMuZGV0ZWN0Q2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOw0KICAgICAgbGV0IHNjYWxlID0gNzIwIC8gcmVjdC53aWR0aDsNCiAgICAgIHRoaXMubW91c2VYID0gKGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQpICogc2NhbGU7DQogICAgICB0aGlzLm1vdXNlWSA9IChldmVudC5jbGllbnRZIC0gcmVjdC50b3ApICogc2NhbGU7DQogICAgfSk7DQoNCiAgICB0aGlzLmRldGVjdENhbnZhcy5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWRvd24iLCAoKSA9PiB7DQogICAgICBpZiAodGhpcy5lZGl0TW9kZSA9PSAiaW1tZWRpYXRlIikgew0KICAgICAgICB0aGlzLmltbWVkaWF0ZS5JRCA9ICIiOw0KICAgICAgICB0aGlzLmltbWVkaWF0ZS5uYW1lID0gIiI7DQogICAgICB9DQogICAgfSk7DQoNCiAgICAvL+S6i+S7tuWkhOeQhg0KICAgIFB1YlN1Yi5zdWJzY3JpYmUoInJlbmFtZSIsIChtc2csIHBheWxvYWQpID0+IHsNCiAgICAgIHRoaXMucGFya2luZ1NwYWNlU3RvcmFnZS5yZW5hbWUocGF5bG9hZC5pZCwgcGF5bG9hZC5uYW1lKTsNCiAgICB9KTsNCiAgICBQdWJTdWIuc3Vic2NyaWJlKCJoaWdobGlnaHQiLCAobXNnLCBpZCkgPT4gew0KICAgICAgdGhpcy5wYXJraW5nU3BhY2VTdG9yYWdlLmhpZ2hsaWdodChpZCk7DQogICAgfSk7DQoNCiAgICAvKioNCiAgICAgKiBQcm92aWRlcyByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgaW4gYSBjcm9zcyBicm93c2VyIHdheS4NCiAgICAgKiBodHRwOi8vcGF1bGlyaXNoLmNvbS8yMDExL3JlcXVlc3RhbmltYXRpb25mcmFtZS1mb3Itc21hcnQtYW5pbWF0aW5nLw0KICAgICAqLw0KICAgIGlmICghd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSkgew0KICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IChmdW5jdGlvbiAoKSB7DQogICAgICAgIHJldHVybiAoDQogICAgICAgICAgd2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fA0KICAgICAgICAgIHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwNCiAgICAgICAgICB3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fA0KICAgICAgICAgIHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fA0KICAgICAgICAgIGZ1bmN0aW9uIChjYWxsYmFjaykgew0KICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MCk7DQogICAgICAgICAgfQ0KICAgICAgICApOw0KICAgICAgfSkoKTsNCiAgICB9DQogIH0sDQogIHdhdGNoOiB7DQogICAgZWRpdGFibGUobmV3VmFsKSB7DQogICAgICBpZiAobmV3VmFsKSBQdWJTdWIucHVibGlzaCgiZWRpdC1zdGFydCIpOw0KICAgICAgZWxzZSBQdWJTdWIucHVibGlzaCgiZWRpdC1lbmQiKTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["CheckpointEditor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CheckpointEditor.vue","sourceRoot":"src/ParkingDetector","sourcesContent":["<template>\r\n  <b-card>\r\n    <template v-slot:header>\r\n      识别结果\r\n      <b-button\r\n        class=\"float-right\"\r\n        size=\"sm\"\r\n        variant=\"outline-secondary\"\r\n        v-b-modal.live\r\n        >实时画面</b-button\r\n      >\r\n      <b-modal id=\"live\" title=\"实时画面\" size=\"lg\" ok-only ok-title=\"返回\">\r\n        <b-img\r\n          :src=\"\r\n            'http://' +\r\n            host +\r\n            '/car/getCarBoxLive?url=rtsp://192.168.137.102:8557'\r\n          \"\r\n          fluid-grow\r\n        />\r\n      </b-modal>\r\n      <b-button @click=\"show()\"></b-button>\r\n    </template>\r\n    <!-- 基于mjpeg流的识别结果图像 -->\r\n    <!-- <img\r\n      :src=\"'http://' + host + '/detect/img/' + (editable ? 'box' : 'nobox')\"\r\n      id=\"detectSource\"\r\n      style=\"display:none\"\r\n      crossorigin=\"Anonymous\"\r\n    /> -->\r\n    <img\r\n      :src=\"\r\n        'http://' + host + '/car/getCarBoxLive?url=rtsp://192.168.137.102:8557'\r\n      \"\r\n      id=\"detectSource\"\r\n      style=\"display: none\"\r\n      crossorigin=\"Anonymous\"\r\n    />\r\n    <!-- UI设计时占位用的猫猫图 -->\r\n    <!-- <img src=\"../assets/720x480.png\" id=\"detectSource\" style=\"display: none;\" /> -->\r\n    <!-- 主画布 -->\r\n    <b-overlay :show=\"preparing\">\r\n      <canvas id=\"detectCanvas\"></canvas>\r\n    </b-overlay>\r\n    <!-- 编辑模式的控制表单 -->\r\n    <div v-if=\"editable\">\r\n      <!-- 编辑模式选择器 -->\r\n      <b-form-radio-group id=\"editModeSelector\" v-model=\"editMode\" class=\"mb-3\">\r\n        <b-form-radio value=\"immediate\">即时编号模式</b-form-radio>\r\n        <b-form-radio value=\"continuals\">连续编号模式</b-form-radio>\r\n      </b-form-radio-group>\r\n      <!-- 即时编号模式：每创建一个点，输入框就获得焦点 -->\r\n      <b-form inline v-if=\"editMode == 'immediate'\" class=\"mb-3\">\r\n        <label for=\"immediate-input\">输入编号</label>\r\n        <b-form-input\r\n          id=\"immediate-input\"\r\n          ref=\"immediate-input\"\r\n          v-model=\"immediate.name\"\r\n          :state=\"immediate.state\"\r\n          @keyup=\"rename\"\r\n        />\r\n      </b-form>\r\n      <!-- 连续编号模式：输入初始值，按顺序递增 -->\r\n      <b-form inline v-if=\"editMode == 'continuals'\" class=\"mb-3\">\r\n        <label for=\"continuals-input\">下一个编号</label>\r\n        <b-form-input\r\n          id=\"continuals-input\"\r\n          v-model=\"continuals.next\"\r\n          :state=\"continuals.state\"\r\n        />\r\n      </b-form>\r\n    </div>\r\n    <!-- 切换编辑模式的按钮 -->\r\n    <b-button\r\n      block\r\n      class=\"mt-3\"\r\n      variant=\"outline-secondary\"\r\n      @click=\"editable = !editable\"\r\n    >\r\n      {{ editable ? \"完成\" : \"编辑\" }}\r\n    </b-button>\r\n    <div style=\"display: none\">\r\n      <img ref=\"conf0\" :src=\"conf0Src\" />\r\n    </div>\r\n  </b-card>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { v4 as uuid } from \"uuid\";\r\nimport PubSub from \"pubsub-js\";\r\nimport conf0Src1 from \"@/assets/car.jpg\";\r\n\r\nclass ParkingSpace {\r\n  constructor(x, y, id, name, ctx) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.id = id;\r\n    this.ctx = ctx;\r\n    this.name = name;\r\n    this.radius = 5;\r\n    this.available = true;\r\n    this.highlight = false;\r\n    this.availableCounter = 0;\r\n    this.proportionX = 720/1980;\r\n    this.proportionY = 480/1080;\r\n  }\r\n\r\n  isHover(mouseX, mouseY) {\r\n    // 水平距离或垂直距离大于半径，则一定不可能悬停\r\n    if (\r\n      Math.abs(this.x - mouseX) > this.radius ||\r\n      Math.abs(this.y - mouseY) > this.radius\r\n    ) {\r\n      return false;\r\n    }\r\n    let distance = Math.sqrt(\r\n      (this.x - mouseX) * (this.x - mouseX) +\r\n        (this.y - mouseY) * (this.y - mouseY)\r\n    );\r\n    if (distance > this.radius) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  refreshAvailability(detections) {\r\n    let available = true;\r\n    let stateChanged = false;\r\n    let index = 0\r\n    console.log(detections)\r\n    // for (let e in detections) {\r\n    //   if(!detections[e].available) {\r\n    //     available = detections[e].available\r\n    //     console.log(\"Name:\",detections[e].available)\r\n    //     break;\r\n    //   }\r\n    // }\r\n    for (let e of detections) {\r\n      let left = e[0] * this.proportionX;\r\n      let top = e[1] * this.proportionY;\r\n      let right = left + e[2] * this.proportionX;\r\n      let bottom = top + e[3] * this.proportionY;\r\n      if (this.y > top && this.y < bottom && this.x > left && this.x < right) {\r\n        available = false;\r\n        break;\r\n      }\r\n    }\r\n    //模型容易把有车识别成没车，但不容易把没车识别成有车，所以连续识别三次没车才改变状态\r\n    // console.log(\"available:\",available,this.available)\r\n    // console.log(this.availableCounter)\r\n    if (available) {\r\n      console.log(1)\r\n      this.availableCounter++;\r\n      if (this.availableCounter == 3) {\r\n      console.log(2)\r\n        this.available = true;\r\n        this.availableCounter = 0;\r\n        stateChanged = true;\r\n      }\r\n    } else {\r\n      console.log(3)\r\n      if (this.available) stateChanged = true;\r\n      console.log(4)\r\n      this.available = false;\r\n      this.availableCounter = 0;\r\n    }\r\n    return stateChanged;\r\n  }\r\n\r\n  refreshExterior(mouseX, mouseY) {\r\n    this.ctx.beginPath();\r\n    let isHover = this.isHover(mouseX, mouseY);\r\n    let resizeFactor = this.highlight || isHover ? 1.5 : 1;\r\n    this.ctx.arc(\r\n      this.x,\r\n      this.y,\r\n      this.radius * resizeFactor,\r\n      0,\r\n      2 * Math.PI,\r\n      false\r\n    );\r\n    // console.log(\"highlight:\",this.highlight,\",available:\",this.available)\r\n    this.ctx.fillStyle = (() => {\r\n      if (this.highlight) return \"#ffa500\";\r\n      if (this.available) return \"#00ff00\";\r\n      return \"#ff0000\";\r\n    })();\r\n    this.ctx.fill();\r\n    if (isHover) {\r\n      this.ctx.lineWidth = 2;\r\n      this.ctx.strokeStyle = this.available ? \"#003300\" : \"#330000\";\r\n      this.ctx.stroke();\r\n    }\r\n  }\r\n\r\n}\r\n\r\nclass ParkingSpaceStorage {\r\n  constructor(ctx, host, url) {\r\n    this.ctx = ctx;\r\n    this.host = host;\r\n    this.url = url;\r\n    this.storage = new Map();\r\n  }\r\n\r\n  load(data) {\r\n    // alert(this.host);\r\n    console.log(\"====\");\r\n    console.log(data);\r\n    for (let id in data) {\r\n      this.create(data[id].x, data[id].y, false, id, data[id].name);\r\n    }\r\n  }\r\n\r\n  create(x, y, exportNeeded, id = null, name = null) {\r\n    let newID = id == null ? uuid() : id;\r\n    let newName = name == null ? newID.substring(0, 5) : name;\r\n    this.storage.set(\r\n      newID,\r\n      new ParkingSpace(Math.round(x), Math.round(y), newID, newName, this.ctx)\r\n    );\r\n\r\n    PubSub.publish(\"create\", {\r\n      x: Math.round(x),\r\n      y: Math.round(y),\r\n      id: newID,\r\n      name: newName,\r\n    });\r\n    if (exportNeeded) this.export();\r\n    return newID;\r\n  }\r\n\r\n  remove(element) {\r\n    this.storage.delete(element.id);\r\n    PubSub.publish(\"remove\", element.id);\r\n    this.export();\r\n  }\r\n\r\n  forEach(callback) {\r\n    this.storage.forEach(callback);\r\n  }\r\n\r\n  refreshExterior(mouseX, mouseY) {\r\n    this.forEach((ps) => {\r\n      ps.refreshExterior(mouseX, mouseY);\r\n    });\r\n  }\r\n\r\n  refreshAvailability(detections) {\r\n    this.forEach((ps) => {\r\n      console.log(ps)\r\n      let stateChanged = ps.refreshAvailability(detections);\r\n      console.log(stateChanged)\r\n      if (stateChanged) {\r\n        PubSub.publish(\"change\", { id: ps.id, available: ps.available });\r\n      }\r\n    });\r\n  }\r\n\r\n  rename(id, name) {\r\n    let element = this.storage.get(id);\r\n    element.name = name;\r\n    this.storage.set(id, element);\r\n    this.export();\r\n  }\r\n\r\n  highlight(id) {\r\n    this.forEach((ps) => {\r\n      if (ps.id == id) {\r\n        ps.highlight = true;\r\n      } else {\r\n        ps.highlight = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  isDuplicate(name) {\r\n    let duplicate = false;\r\n    this.forEach((ps) => {\r\n      if (ps.name == name) duplicate = true;\r\n    });\r\n    return duplicate;\r\n  }\r\n\r\n  export() {\r\n    let tempStorage = {};\r\n    alert(this.url);\r\n    this.forEach((ps) => {\r\n      tempStorage[ps.id] = { x: ps.x, y: ps.y, name: ps.name };\r\n    });\r\n    axios\r\n      // .post(`http://${this.host}/detect/checkpoints`, tempStorage)\r\n      .post(`http://${this.host}/car/updateParkingPoint`, {\r\n        url: this.url,\r\n        parkingPoint: tempStorage,\r\n      })\r\n      .then((resp) => {\r\n        if (resp.status !== 200) {\r\n          console.error(\"cannot post point data\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n}\r\n\r\nexport default {\r\n  name: \"ckeckpoint-editor\",\r\n  props: {\r\n    // host: String,\r\n  },\r\n  data: function () {\r\n    return {\r\n      host: \"mqtt.iot.nlinks.cn:9898\",\r\n      url: \"rtsp://192.168.137.102:8557\",\r\n      //识别结果画布及其上下文\r\n      detectCanvas: null,\r\n      detectCtx: null,\r\n      //车位（检查点）列表\r\n      parkingSpaceStorage: null,\r\n      //detection = [[x, y, w, h], [x, y, w, h], ...]\r\n      detections: null,\r\n      //鼠标位置\r\n      mouseX: 0,\r\n      mouseY: 0,\r\n      //是否在编辑状态\r\n      editable: false,\r\n      //编辑状态相关\r\n      editMode: \"immediate\",\r\n      immediate: {\r\n        ID: \"\",\r\n        name: \"\",\r\n        state: null,\r\n      },\r\n      continuals: {\r\n        next: \"001\",\r\n        state: null,\r\n      },\r\n      //是否还在初始化,“加载中”\r\n      preparing: true,\r\n      conf0Src: conf0Src1,\r\n      proportionX: 720/1980,\r\n      proportionY: 480/1080,\r\n    };\r\n  },\r\n  methods: {\r\n    show() {\r\n      alert(this.host);\r\n    },\r\n    rename: function () {\r\n      if (this.parkingSpaceStorage.isDuplicate(this.immediate.name)) {\r\n        this.immediate.state = false;\r\n        return;\r\n      }\r\n      this.immediate.state = null;\r\n      PubSub.publish(\"rename\", {\r\n        id: this.immediate.ID,\r\n        name: this.immediate.name,\r\n      });\r\n    },\r\n    continualsNext: function () {\r\n      let digit = this.continuals.next.length;\r\n      let newNext = `${Number.parseInt(this.continuals.next) + 1}`;\r\n      while (newNext.length < digit) newNext = `0${newNext}`;\r\n      this.continuals.next = newNext;\r\n    },\r\n  },\r\n  mounted: async function () {\r\n    const _this = this;\r\n    //创建对识别结果画布及其上下文的引用\r\n    this.detectCanvas = document.getElementById(\"detectCanvas\");\r\n    this.detectCanvas.width = 720;\r\n    this.detectCanvas.height = 480;\r\n    this.detectCtx = document.getElementById(\"detectCanvas\").getContext(\"2d\");\r\n    //初始化检查点储存\r\n    this.parkingSpaceStorage = new ParkingSpaceStorage(\r\n      this.detectCtx,\r\n      this.host,\r\n      this.url\r\n    );\r\n\r\n    //获取服务器端缓存的检查点信息\r\n    await axios\r\n      // .get(`http://${this.host}/camera/detect/checkpoints`)\r\n      .post(`http://${this.host}/car/getParkingPoint`, {\r\n        url: this.url,\r\n      })\r\n      .then((resp) => {\r\n        if (resp.status == 200) {\r\n          var data = resp.data.data;\r\n          this.parkingSpaceStorage.load(data);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.error(`${err}`);\r\n      });\r\n\r\n    //获取识别框\r\n    await axios\r\n      // .get(`http://${this.host}/camera/detect/box`)\r\n      .post(`http://${this.host}/car/getCarBoundingBox`, {\r\n        url: this.url,\r\n      })\r\n      .then((resp) => {\r\n        if (resp.status == 200) {\r\n          this.detections = resp.data.data;\r\n        } else {\r\n          this.detections = [];\r\n          console.error(\"cannot fetch detections\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.error(`${err}`);\r\n      });\r\n\r\n    //当图像源宽度不是0（即已加载好）时取消\"准备中\"遮罩\r\n    let prepareChecker = setInterval(() => {\r\n      if (document.getElementById(\"detectSource\").width != 0) {\r\n        clearInterval(prepareChecker);\r\n        this.preparing = false;\r\n      }\r\n    }, 50);\r\n\r\n    //每50毫秒刷新一次画布\r\n    let lastRefreshTimestamp = 0;\r\n    let refreshCanvas = (time) => {\r\n      if (time - lastRefreshTimestamp > 50) {\r\n        lastRefreshTimestamp = time;\r\n        let source = document.getElementById(\"detectSource\");\r\n        // console.log(source)\r\n        try {\r\n          this.detectCtx.drawImage(\r\n            source,\r\n            0,\r\n            0,\r\n            this.detectCanvas.width,\r\n            this.detectCanvas.height\r\n          );\r\n        } catch (error) {\r\n          /*ignore warning*/\r\n        }\r\n        this.parkingSpaceStorage.refreshExterior(this.mouseX, this.mouseY);\r\n      }\r\n      requestAnimationFrame(refreshCanvas);\r\n    };\r\n    requestAnimationFrame(refreshCanvas);\r\n\r\n    //每4秒获取一次识别框并刷新占用情况\r\n    let lastFetchTimestamp = 0;\r\n    let fetchDetection = async (time) => {\r\n      if (time - lastFetchTimestamp > 4000) {\r\n        lastFetchTimestamp = time;\r\n        await axios\r\n          // .get(`http://${this.host}/camera/detect/box`)\r\n          .post(`http://${this.host}/car/getCarBoundingBox`, {\r\n            url: this.url,\r\n          })\r\n          .then((resp) => {\r\n            if (resp.status == 200) {\r\n              this.detections = resp.data.data;\r\n\r\n              // for(let e in this.detections) {\r\n              //   if(e == \"2bcc53d4-ab01-40a2-a8e0-da206cd2e49b\" ||\r\n              //   e == \"9c2436fb-5db1-4b11-9b90-7e9974a6dfdc\"){\r\n              //     this.detections[e].available = false\r\n              //   }\r\n              // }\r\n            } else {\r\n              this.detections = [];\r\n              console.error(\"cannot fetch detections\");\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.error(err);\r\n          });\r\n        this.parkingSpaceStorage.refreshAvailability(this.detections);\r\n      }\r\n      requestAnimationFrame(fetchDetection);\r\n    };\r\n    requestAnimationFrame(fetchDetection);\r\n\r\n    //取消画布点击右键时弹出右键菜单\r\n    this.detectCanvas.addEventListener(\"contextmenu\", (event) => {\r\n      event.preventDefault();\r\n    });\r\n\r\n    //鼠标抬起时尝试创建新检查点\r\n    this.detectCanvas.addEventListener(\"mouseup\", (event) => {\r\n      if (!this.editable) return;\r\n      if (this.mouseX < 720 && this.mouseY < 480) {\r\n        let newParkingSpace = true;\r\n        if (event.button == 0) {\r\n          //左键单击时\r\n          //如果没有悬停在现有检查点上，则创建一个新的检查点\r\n          this.parkingSpaceStorage.forEach((ps) => {\r\n            if (ps.isHover(this.mouseX, this.mouseY)) {\r\n              newParkingSpace = false;\r\n            }\r\n          });\r\n          if (newParkingSpace) {\r\n            if (this.editMode == \"immediate\") {\r\n              this.immediate.ID = this.parkingSpaceStorage.create(\r\n                this.mouseX,\r\n                this.mouseY,\r\n                true\r\n              );\r\n              this.$refs[\"immediate-input\"].focus();\r\n            }\r\n            if (this.editMode == \"continuals\") {\r\n              this.parkingSpaceStorage.create(\r\n                this.mouseX,\r\n                this.mouseY,\r\n                true,\r\n                null,\r\n                this.continuals.next\r\n              );\r\n              this.continualsNext();\r\n            }\r\n          }\r\n        } else if (event.button == 2) {\r\n          //右键单击时\r\n          //如果悬停在现有检查点上，则删除这个检查点\r\n          this.parkingSpaceStorage.forEach((ps) => {\r\n            if (ps.isHover(this.mouseX, this.mouseY)) {\r\n              this.parkingSpaceStorage.remove(ps);\r\n            }\r\n          });\r\n        } else if (event.button == 1) {\r\n          console.log(`(${this.mouseX}, ${this.mouseY})`);\r\n        }\r\n      }\r\n    });\r\n\r\n    //鼠标移动时刷新储存的鼠标位置\r\n    this.detectCanvas.addEventListener(\"mousemove\", (event) => {\r\n      if (!this.editable) return;\r\n      let rect = this.detectCanvas.getBoundingClientRect();\r\n      let scale = 720 / rect.width;\r\n      this.mouseX = (event.clientX - rect.left) * scale;\r\n      this.mouseY = (event.clientY - rect.top) * scale;\r\n    });\r\n\r\n    this.detectCanvas.addEventListener(\"mousedown\", () => {\r\n      if (this.editMode == \"immediate\") {\r\n        this.immediate.ID = \"\";\r\n        this.immediate.name = \"\";\r\n      }\r\n    });\r\n\r\n    //事件处理\r\n    PubSub.subscribe(\"rename\", (msg, payload) => {\r\n      this.parkingSpaceStorage.rename(payload.id, payload.name);\r\n    });\r\n    PubSub.subscribe(\"highlight\", (msg, id) => {\r\n      this.parkingSpaceStorage.highlight(id);\r\n    });\r\n\r\n    /**\r\n     * Provides requestAnimationFrame in a cross browser way.\r\n     * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\r\n     */\r\n    if (!window.requestAnimationFrame) {\r\n      window.requestAnimationFrame = (function () {\r\n        return (\r\n          window.webkitRequestAnimationFrame ||\r\n          window.mozRequestAnimationFrame ||\r\n          window.oRequestAnimationFrame ||\r\n          window.msRequestAnimationFrame ||\r\n          function (callback) {\r\n            window.setTimeout(callback, 1000 / 60);\r\n          }\r\n        );\r\n      })();\r\n    }\r\n  },\r\n  watch: {\r\n    editable(newVal) {\r\n      if (newVal) PubSub.publish(\"edit-start\");\r\n      else PubSub.publish(\"edit-end\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#detectCanvas {\r\n  /*  \"#003300\" : \"#330000\" : \"#ffa500\" : \"#00ff00\" */\r\n  width: 100%;\r\n  /* color: #ff0000; */\r\n}\r\n</style>\r\n"]}]}